name: Deploy Website

on: [push]
 
jobs:
  build:    
    runs-on: ubuntu-latest
    name: Deploying to surge
    steps:
      - uses: actions/checkout@v2
      - name: Install Node.js
        uses: actions/setup-node@v2-beta
        with:
          node-version: latest
        - name: Prepare for Yarn Installation
          run: curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add - echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
    - name: install yarn
      run: sudo apt update && sudo apt install yarn
    - name: Build React app
      run: yarn build
    - name: install Surge
      run: npm install --global surge
      
     - name: Deploy React App to Surge
      run: surge ./build https://bootcamp-class2-project1.surge.sh/ --token ${{secrets.SURGE_TOKEN}}
      
          
